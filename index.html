<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Party Guessing Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
      background: #fafafa;
      color: #333;
    }
    header {
      background: #c8102e;
      color: #fff;
      padding: 1rem;
      font-size: 1.2rem;
    }
    .controls {
      margin: 1rem;
    }
    .controls select,
    .controls input,
    .controls button {
      margin: 0.5rem;
      padding: 0.5rem;
      font-size: 1rem;
    }
    .game {
      position: relative;
      margin: 1rem auto;
      max-width: 600px;
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .timer {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 0.3rem 0.6rem;
      border-radius: 0.5rem;
      font-size: 1.2rem;
    }
    .card {
      display: none;
      flex-direction: column;
      align-items: center;
    }
    .card.active {
      display: flex;
    }
    .card img {
      width: 100%;
      height: auto;
      border-bottom: 1px solid #ddd;
    }
    .card-title {
      font-size: 1.3rem;
      margin: 1.2rem 0 1rem; /* Added extra top margin to avoid overlap */
      font-weight: bold;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 1rem;
      border-radius: 1rem;
      max-width: 500px;
      text-align: left;
      overflow-y: auto;
      max-height: 90vh;
    }
    .results-list img {
      height: 40px;
      vertical-align: middle;
      margin-right: 0.5rem;
    }
    .button-red {
      border: 2px solid #c8102e;
      background: transparent;
      color: #333;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
    }
    .button-red:hover,
    .button-red:active {
      background: #c8102e;
      color: #fff;
    }
  </style>
</head>
<body>
  <header>Party Guessing Game</header>
  <div class="controls">
    <select id="deck">
      <option value="animals">Animals</option>
      <option value="bollywood">Bollywood Movies</option>
    </select>
    <input id="time" type="number" value="60" min="10" /> seconds
    <button class="button-red" onclick="startGame()">Start</button>
  </div>
  <div class="game" id="game">
    <div class="timer" id="timer"></div>
  </div>  <div class="modal" id="resultsModal">
    <div class="modal-content">
      <h2>Results</h2>
      <p>Correct: <span id="correctCount"></span></p>
      <p>Wrong: <span id="wrongCount"></span></p>
      <h3>Correct Guesses</h3>
      <div class="results-list" id="correctList"></div>
      <h3>Wrong Guesses</h3>
      <div class="results-list" id="wrongList"></div>
      <button class="button-red" onclick="downloadResults()">Download JSON</button>
      <button class="button-red" onclick="closeModal()">Close</button>
    </div>
  </div>  <script>
    const animals = [
      "ü¶Å Lion","üêØ Tiger","üêò Elephant","ü¶ì Zebra","ü¶í Giraffe","üêí Monkey","üêº Panda","üêç Snake","ü¶Ö Eagle","üêß Penguin"
    ];
    const movies = [
      "Dilwale Dulhania Le Jayenge","Sholay","3 Idiots","Lagaan","Dangal","Kabhi Khushi Kabhie Gham","Mughal-e-Azam","PK","Zindagi Na Milegi Dobara","Gully Boy"
    ];

    let currentDeck = [];
    let currentIndex = 0;
    let timerInterval;
    let timeLeft;
    let correctGuesses = [];
    let wrongGuesses = [];

    async function fetchImage(query, type) {
      if(type === "animals") {
        return `https://source.unsplash.com/800x600/?${query.split(' ')[1]}&sig=${Math.random()}`;
      } else {
        const url = `https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=pageimages&piprop=thumbnail&pithumbsize=600&titles=${encodeURIComponent(query)}`;
        try {
          const res = await fetch(url);
          const data = await res.json();
          const pages = data.query.pages;
          const page = Object.values(pages)[0];
          if(page.thumbnail) return page.thumbnail.source;
        } catch(e) { console.log(e); }
        return `https://source.unsplash.com/800x600/?movie,poster&sig=${Math.random()}`;
      }
    }

    async function startGame(){
      document.getElementById("game").innerHTML = '<div class="timer" id="timer"></div>';
      correctGuesses = [];
      wrongGuesses = [];
      const deckChoice = document.getElementById("deck").value;
      currentDeck = deckChoice === "animals" ? [...animals] : [...movies];
      currentDeck.sort(() => Math.random() - 0.5);
      currentIndex = 0;
      timeLeft = parseInt(document.getElementById("time").value);
      document.getElementById("timer").textContent = timeLeft;
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = timeLeft;
        if(timeLeft <= 0) endGame();
      }, 1000);
      showCard();
    }

    async function showCard(){
      if(currentIndex >= currentDeck.length){
        endGame();
        return;
      }
      const item = currentDeck[currentIndex];
      const type = document.getElementById("deck").value;
      const img = await fetchImage(item, type);
      const card = document.createElement("div");
      card.className = "card active";
      card.innerHTML = `<img src="${img}" alt="${item}"><div class="card-title">${item}</div>`;
      const game = document.getElementById("game");
      game.querySelectorAll(".card").forEach(c => c.remove());
      game.appendChild(card);
      card.onclick = (e)=>{
        if(e.clientX > window.innerWidth/2){
          correctGuesses.push({name:item,img:img});
        } else {
          wrongGuesses.push({name:item,img:img});
        }
        currentIndex++;
        showCard();
      }
      document.onkeydown = (e)=>{
        if(e.key === "ArrowRight"){
          correctGuesses.push({name:item,img:img});
          currentIndex++; showCard();
        } else if(e.key === "ArrowLeft"){
          wrongGuesses.push({name:item,img:img});
          currentIndex++; showCard();
        }
      }
    }

    function endGame(){
      clearInterval(timerInterval);
      document.getElementById("correctCount").textContent = correctGuesses.length;
      document.getElementById("wrongCount").textContent = wrongGuesses.length;
      document.getElementById("correctList").innerHTML = correctGuesses.map(g=>`<div><img src="${g.img}">${g.name}</div>`).join("");
      document.getElementById("wrongList").innerHTML = wrongGuesses.map(g=>`<div><img src="${g.img}">${g.name}</div>`).join("");
      document.getElementById("resultsModal").style.display = "flex";
    }

    function closeModal(){
      document.getElementById("resultsModal").style.display = "none";
    }

    function downloadResults(){
      const results = {correct: correctGuesses, wrong: wrongGuesses};
      const blob = new Blob([JSON.stringify(results,null,2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "results.json";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script></body>
</html>
